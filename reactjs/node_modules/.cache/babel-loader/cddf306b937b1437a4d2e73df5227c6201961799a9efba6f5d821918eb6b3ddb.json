{"ast":null,"code":"import axios from 'axios';\nconst baseVideoURL = 'http://localhost:3002/playlist';\nconst baseUserURL = 'http://localhost:3002/users';\nlet token = localStorage.getItem('token');\nexport const addVideo = (src, name) => {\n  let today = new Date();\n  let dd = String(today.getDate()).padStart(2, '0');\n  let mm = String(today.getMonth() + 1).padStart(2, '0');\n  let yyyy = today.getFullYear();\n  let hour = String(today.getHours()).padStart(2, '0');\n  let minute = String(today.getMinutes()).padStart(2, '0');\n  let second = String(today.getSeconds()).padStart(2, '0');\n  today = `${mm}/${dd}/${yyyy} ${hour}:${minute}:${second}`;\n  const newVideo = {\n    avtUser: 'penguin.png',\n    src: src,\n    name: name,\n    author: localStorage.getItem('username'),\n    watched: '0',\n    date: today\n  };\n  return axios.post(`${baseVideoURL}`, newVideo, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    }\n  }).then(response => {\n    console.log('Video added successfully:', response.data);\n    return response.data;\n  }).catch(error => {\n    console.error('Error adding video:', error);\n    throw error;\n  });\n};\nexport const logout = username => {\n  const data = {\n    username: username\n  };\n  return axios.post('/logout', data, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  }).then(response => {\n    if (response.status === 200) {\n      const responseData = response.data;\n      if (responseData.message === 'Success') {\n        window.location.replace(\"/login\");\n      }\n    } else {\n      console.error('Error logging out:', response);\n      throw response;\n    }\n  }).catch(error => {\n    console.error('Error logging out:', error);\n    throw error;\n  });\n};\nexport const editVideo = newName => {\n  let id = newName.id;\n  let name = newName.name;\n  let body = {\n    name: name\n  };\n  body = JSON.stringify(body);\n  const options = {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    }\n  };\n  return axios.patch(`${baseVideoURL}/${id}`, body, options).then(response => {\n    console.log('Video change successfully:', response.data);\n    return response.data;\n  }).catch(error => {\n    console.error('Error change video:', error);\n    throw error;\n  });\n};\nexport const editUser = editUser => {\n  let id = editUser.id;\n  let body = {\n    Username: editUser.username,\n    PasswordHash: editUser.password,\n    Email: editUser.email,\n    Role: editUser.role\n  };\n  body = JSON.stringify(body);\n  const options = {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    }\n  };\n  return axios.patch(`${baseUserURL}/${id}`, body, options).then(response => {\n    console.log('User change successfully:', response.data);\n    return response.data;\n  }).catch(error => {\n    console.error('Error change user:', error);\n    throw error;\n  });\n};\nexport const delVideo = id => {\n  const confirmDelete = window.confirm('Bạn có chắc chắn muốn xóa video này?');\n  if (confirmDelete) {\n    const options = {\n      headers: {\n        Authorization: `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    };\n    return axios.delete(`${baseVideoURL}/${id}`, options).then(response => {\n      console.log('Video delete successfully:', response.data);\n      return response.data;\n    }).catch(error => {\n      console.error('Error delete video:', error);\n      throw error;\n    });\n  } else {\n    console.log('Không xóa video');\n    return Promise.resolve({\n      message: 'Không xóa video'\n    });\n  }\n};\nexport const delUser = id => {\n  const confirmDelete = window.confirm('Bạn có chắc chắn muốn xóa user này?');\n  if (confirmDelete) {\n    const options = {\n      headers: {\n        Authorization: `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    };\n    return axios.delete(`${baseUserURL}/${id}`, options).then(response => {\n      console.log('User delete successfully:', response.data);\n      return response.data;\n    }).catch(error => {\n      console.error('Error delete user:', error);\n      throw error;\n    });\n  } else {\n    console.log('Không xóa user');\n    return Promise.resolve({\n      message: 'Không xóa user'\n    });\n  }\n};","map":{"version":3,"names":["axios","baseVideoURL","baseUserURL","token","localStorage","getItem","addVideo","src","name","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","hour","getHours","minute","getMinutes","second","getSeconds","newVideo","avtUser","author","watched","date","post","headers","Authorization","then","response","console","log","data","catch","error","logout","username","status","responseData","message","window","location","replace","editVideo","newName","id","body","JSON","stringify","options","patch","editUser","Username","PasswordHash","password","Email","email","Role","role","delVideo","confirmDelete","confirm","delete","Promise","resolve","delUser"],"sources":["/home/rb144/Documents/projectItern/reactjs/src/components/function/api.jsx"],"sourcesContent":["import axios from 'axios';\nconst baseVideoURL = 'http://localhost:3002/playlist'; \nconst baseUserURL = 'http://localhost:3002/users'; \nlet token = localStorage.getItem('token');\n\nexport const addVideo = (src, name) => {\n    let today = new Date();\n    let dd = String(today.getDate()).padStart(2, '0');\n    let mm = String(today.getMonth() + 1).padStart(2, '0');\n    let yyyy = today.getFullYear();\n    let hour = String(today.getHours()).padStart(2, '0');\n    let minute = String(today.getMinutes()).padStart(2, '0');\n    let second = String(today.getSeconds()).padStart(2, '0');\n    today = `${mm}/${dd}/${yyyy} ${hour}:${minute}:${second}`;\n\n    const newVideo = {\n        avtUser: 'penguin.png',\n        src: src,\n        name: name,\n        author: localStorage.getItem('username'),\n        watched: '0',\n        date: today\n    };\n    return axios.post(`${baseVideoURL}`, newVideo, {\n        headers: {\n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json'\n        }\n    })\n    .then(response => {\n        console.log('Video added successfully:', response.data);\n        return response.data; \n    })\n    .catch(error => {\n        console.error('Error adding video:', error);\n        throw error; \n    });\n};\n  \nexport const logout = (username) => {\n    const data = {\n        username: username\n    };\n\n    return axios.post('/logout', data, {\n        headers: {\n            Authorization: `Bearer ${token}`       \n        }\n    })\n    .then(response => {\n        if (response.status === 200) {\n            const responseData = response.data;\n            if (responseData.message === 'Success') {\n                window.location.replace(\"/login\");\n            }\n        } else {\n            console.error('Error logging out:', response);\n            throw response; \n        }\n    })\n    .catch(error => {\n        console.error('Error logging out:', error);\n        throw error;\n    });\n};\n\nexport const editVideo = (newName) => {\n    let id = newName.id;\n    let name = newName.name;\n    let body = {name: name};\n    body = JSON.stringify(body);\n    const options = {\n        headers: {\n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json'\n        }\n    };\n\n    return axios.patch(`${baseVideoURL}/${id}`, body, options)\n        .then(response => {\n            console.log('Video change successfully:', response.data);\n            return response.data; \n        })\n        .catch(error => {\n            console.error('Error change video:', error);\n            throw error; \n        });\n};\n\nexport const editUser = (editUser) => {\n    let id = editUser.id;\n    let body = {\n        Username: editUser.username,\n        PasswordHash: editUser.password,\n        Email: editUser.email,\n        Role: editUser.role\n    };\n    body = JSON.stringify(body);\n    const options = {\n        headers: {\n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json'\n        }\n    };\n\n    return axios.patch(`${baseUserURL}/${id}`, body, options)\n        .then(response => {\n            console.log('User change successfully:', response.data);\n            return response.data; \n        })\n        .catch(error => {\n            console.error('Error change user:', error);\n            throw error; \n        });\n};\n\nexport const delVideo = (id) => {\n    const confirmDelete = window.confirm('Bạn có chắc chắn muốn xóa video này?');\n\n    if (confirmDelete) {\n\n        const options = {\n            headers: {\n                Authorization: `Bearer ${token}`,\n                'Content-Type': 'application/json'\n            },\n        };\n\n        return axios.delete(`${baseVideoURL}/${id}`, options)\n            .then(response => {\n                console.log('Video delete successfully:', response.data);\n                return response.data; \n            })\n            .catch(error => {\n                console.error('Error delete video:', error);\n                throw error; \n            });\n    } else {\n        console.log('Không xóa video');\n        return Promise.resolve({ message: 'Không xóa video' });\n    }\n};\n\nexport const delUser = (id) => {\n    const confirmDelete = window.confirm('Bạn có chắc chắn muốn xóa user này?');\n\n    if (confirmDelete) {\n\n        const options = {\n            headers: {\n                Authorization: `Bearer ${token}`,\n                'Content-Type': 'application/json'\n            },\n        };\n\n        return axios.delete(`${baseUserURL}/${id}`, options)\n            .then(response => {\n                console.log('User delete successfully:', response.data);\n                return response.data; \n            })\n            .catch(error => {\n                console.error('Error delete user:', error);\n                throw error; \n            });\n    } else {\n        console.log('Không xóa user');\n        return Promise.resolve({ message: 'Không xóa user' }); \n    }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}